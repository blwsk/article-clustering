Twitter's having a rough afternoon. Before markets even closed, the company's quarterly earnings were leaked by Selerity, a company that apparently scraped them from Twitter's own investor page. After its stock began to dip, Twitter subsequently halted trading and released the numbers early. Trading has now resumed, with the stock down about 18 percent.

Those figures show Twitter suffering a big miss on revenue, bringing in $436 million versus the expected $456. The company says part of that was due to the acquisition of a marketing technology company, TellApart. The company lost $162 million, compared with $132 million for this period last year. It also lowered its revenue projections, trimming next quarter to $470-$485 million, well below expectations for revenue of $538.1 million, as compiled by Bloomberg.

There was some positive data in the earnings. Twitter fell short of its mobile monthly active users target. But the overall total of monthly active users was in line with expectations at 302 million, marking the first time Twitter has surpassed the 300 million mark. That's a rise of 18 percent over last year and up from 288 million last quarter.

Selerity is a data mining firm that has pulled this kind of prank before. According to Forbes the firm "crawls URLs that closely match those that corporate investor relations departments have previously used to publish quarterly results...In January 2011, Selerity found Microsoft's results more than an hour before the market close." Selerity said at the time that the results were also public, and not a hack, as it claimed today with Twitter.

On its earnings call, Twitter pointed the finger at NASDAQ, which it says manages its investor relations website, and was instructed not to publish any data prior to today's market close. Just last week NASDAQ agreed to pay $26.5 million to settle a class-action lawsuit over the way it bungled Facebook's IPO.

Lost amid the panic of the leaked earnings was news that Twitter will be working more closely with Google, making its advertising inventory available through the DoubleClick ad exchange. CEO Dick Costolo also said that Periscope, the live streaming app Twitter recently acquired and launched, saw one million signups in its first 10 days. The company also shut off access to its data during this quarter. That helped to boost revenue for that division, which $48 million, growth of 95 percent year over year.